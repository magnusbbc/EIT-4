MOVI $r1 65100 //Button Interrupt Service routine 
MOVI $r2 #BUTISR
STORE $r2 [$r1]
MOVI $r2 512 //Enable interrupt, disable nesting
STORE $r2 [$r1+1]

MOVI $r1 65104 //I2S Interrupt serivce routine
MOVI $r2 #I2SREADYISR
STORE $r2 [$r1]
MOVI $r2 512 //Enable interrupt, disable nesting
STORE $r2 [$r1+1]

//Write 3 to 7seg
MOVI $r3 3
MOVI $r1 65000
STORE $r3 [$r1]

MOVI $r5 232
STORE $r5 [$r10+65010]
MOVI $r7 #SineStart
LOOP:
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
JMP #LOOP

I2SREADYISR:
JMPR $r7 
SineStart:
MOVI $r5 0
JMP  #OUT
MOVI $r5 8652
JMP  #OUT
MOVI $r5 16457
JMP  #OUT
MOVI $r5 22652
JMP  #OUT
MOVI $r5 26629
JMP  #OUT
MOVI $r5 28000
JMP  #OUT
MOVI $r5 26629
JMP  #OUT
MOVI $r5 22652
JMP  #OUT
MOVI $r5 16457
JMP  #OUT
MOVI $r5 8652
JMP  #OUT
MOVI $r5 0
JMP  #OUT
MOVI $r5 -8652
JMP  #OUT
MOVI $r5 -16457
JMP  #OUT
MOVI $r5 -22652
JMP  #OUT
MOVI $r5 -26629
JMP  #OUT
MOVI $r5 -28000
JMP  #OUT
MOVI $r5 -26629
JMP  #OUT
MOVI $r5 -22652
JMP  #OUT
MOVI $r5 -16457
JMP  #OUT
MOVI $r5 -8652
MOVI $r7 #SineStart
SUBI $r7 2 $r7
OUT:
NOP
NOP
ADDI $r7 2 $r7
STORE $r5 [$r10+65010]
POP $pc

BUTISR:
LOAD $r4 [$r10+65002]
CMPI $r4 4
JMPEQ #AD
SUBI $r3 1 $r3
JMP #SAVE
CMPI $r4 10000
JMPNQ #SAVE
AD:
ADDI $r3 1 $r3
SAVE:
NOP
STORE $r3 [$r10+65000]
POP $pc
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
MOVI $r1 65001
MOVI $r2 15 //Disable BCD, Disable dots
STORE $r2 [$r1]